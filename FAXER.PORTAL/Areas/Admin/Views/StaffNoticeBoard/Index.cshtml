@using PagedList;
@using PagedList.Mvc;
@model IPagedList<FAXER.PORTAL.Areas.Admin.ViewModels.ViewStaffNoticeViewModel>

@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/New_Layout.cshtml";
}

@if (ViewBag.Message == "Notice Added Successfully !")
{
    <script type="text/javascript">
        window.onload = function () {
            Riddha.UI.Toast("@ViewBag.Message", 4);
        };
    </script>
}
@if (ViewBag.Message == "Notice Update Successfully !")
{
    <script type="text/javascript">
        window.onload = function () {
            Riddha.UI.Toast("@ViewBag.Message", 4);
        };
    </script>
}

@*<h2>Index</h2>

    @if (ViewBag.Message == "Notice Added Successfully !")
    {
        <script type="text/javascript">
            window.onload = function () {
                Riddha.UI.Toast("@ViewBag.Message", 4);

            };

        </script>
    }
    <div id="page-wrapper">
        <div class="container-fluid">
            <div class="row bg-title">
                <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
                    <h4 class="page-title">View-Staff Notice</h4>
                </div>
                <div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
                    <a href="@Url.Action("AddStaffNotice", "StaffNoticeBoard")" class="btn btn-info pull-right m-l-20   waves-effect waves-light btn-rounded">Add New Notice</a>
                    <ol class="breadcrumb">
                        <li><a href="/Admin/AdminDashboard">Dashboard</a></li>
                        <li class="active">View-Staff Notice</li>
                    </ol>

                </div>
                 /.col-lg-12
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    @Html.DropDownList("Country", (IEnumerable<SelectListItem>)ViewBag.Countries, "All Countries", new { @class = "form-control", id = "Country", onchange = "Fliter();" })

                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    @Html.DropDownList("City", (IEnumerable<SelectListItem>)ViewBag.SCities, "Choose City", new { @class = "form-control", id = "city", onchange = "Fliter();" })
                </div>
            </div>
            <div class="clearfix"></div>
             /.row
            <div class="row">
                <div class="col-md-12">

                    <div class="white-box">

                        <div class="table-responsive">
                            <table class="table table-bordered table-striped csvprint  " cellspacing="0" width="100%">

                                <thead>
                                    @{
                                        int i = 0;
                                    }

                                    <tr>
                                        <td>SN</td>
                                        <td>Date &amp; Time</td>
                                        <td>Notice Headline</td>

                                        <td>Country</td>
                                        <td>City</td>
                                        <td>Staff</td>

                                        <td>Action</td>

                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model)
                                    {
                                        i++;

                                        <tr>
                                            <td>@i</td>
                                            <td>@item.DateAndTime</td>
                                            <td> <b>@item.Headline</b></td>



                                            <td><b>@item.Country</b></td>
                                            <td><b>@item.City</b></td>
                                            <td><b>@item.StaffName</b></td>
                                            <td>
                                                <a href="@Url.Action("EditStaffNotice","StaffNoticeBoard", new { id=item.Id})" class="btn btn-success btn-sm" href="add-staff-notice.php">Edit</a>
                                                <a href="@Url.Action("DeleteNotice","StaffNoticeBoard", new { id=item.Id})" class="btn btn-danger btn-sm" id="sa-params">Delete</a>
                                            </td>

                                        </tr>
                                    }





                                </tbody>
                            </table>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>*@

<div class="pcoded-content">
    <div class="pcoded-inner-content">

        <div class="main-body">
            <div class="page-wrapper">

                <div class="page-body">
                    <div class="row">

                        <div class="col-sm-12">

                            <div class="card">

                                <div class="card-header border-bottom">
                                    <h4 class="f-left m-t-5 m-b-0">Staff Notice Board </h4>
                                    <a href="@Url.Action("AddStaffNotice", "StaffNoticeBoard")" class="btn btn-primary f-right btn-round">
                                        <i class="icofont icofont-plus m-r-5"></i> Add New Notice
                                    </a>
                                </div>

                                <div class="card-body">
                                    <div class="row m-t-20 m-b-20">



                                        <!--  -->
                                        <div class="col-xl-3 col-md-6">
                                            <div class="form-group">
                                                @Html.DropDownList("Country", (IEnumerable<SelectListItem>)ViewBag.Countries, "All Countries", new { @class = "form-control   form-control-round form-control-bold", id = "Country", onchange = "Fliter();" })

                                            </div>
                                        </div>
                                        <!--  -->
                                        <!--  -->
                                        <div class="col-xl-3 col-md-6">
                                            <div class="form-group">
                                                @Html.DropDownList("City", (IEnumerable<SelectListItem>)ViewBag.Cities, "Choose City", new { @class = "form-control form-control-round form-control-bold", id = "city", onchange = "Fliter();" })

                                            </div>
                                        </div>
                                        <!--  -->
                                        <!--  -->
                                        <div class="col-xl-3 col-md-6">
                                            <div class="form-group">
                                                @Html.DropDownList("Year", (IEnumerable<SelectListItem>)ViewBag.Years, "Select Year", new { @class = "form-control form-control-round form-control-bold", id = "Year", onchange = "Fliter();" })


                                            </div>
                                        </div>
                                        <!--  -->
                                        <!--  -->
                                        <div class="col-xl-3 col-md-6">
                                            <div class="form-group">
                                                <select class="form-control   form-control-round form-control-bold" id="Month" onchange="Fliter();">
                                                    <option value="0">Select Month</option>
                                                    <option value="1">January</option>
                                                    <option value="2">February</option>
                                                    <option value="3">March</option>
                                                    <option value="4">April</option>
                                                    <option value="5">May</option>
                                                    <option value="6">June</option>
                                                    <option value="7">July</option>
                                                    <option value="8">August</option>
                                                    <option value="9">September</option>
                                                    <option value="10">October</option>
                                                    <option value="11">November</option>
                                                    <option value="12">December</option>
                                                </select>

                                            </div>
                                        </div>
                                        <!--  -->
                                        <div class="col-xl-3 col-md-6">
                                            <div class="form-group">
                                                <input type="text" placeholder="Search By staff Name" class="form-control form-control-round form-control-bold" name="staffName" id="staffName" value="@ViewBag.staffName" onchange="Fliter();">
                                            </div>
                                        </div>
                                        <div class="col-xl-3 col-md-6">
                                            <div class="form-group">
                                                <input type="text" placeholder="Search By Title" class="form-control form-control-round form-control-bold" name="Title" id="Title" value="@ViewBag.TitleName" onchange="Fliter();">
                                            </div>
                                        </div>

                                    </div>

                                    <div class="dt-responsive table-responsive">
                                        <table @*id="basic-btn"*@ class="table table-striped table-bordered nowrap">
                                            <thead>
                                                <tr>
                                                    <th>Country</th>
                                                    <th>City</th>
                                                    <th>Staff Name</th>
                                                    <th>Title</th>
                                                    <th>Date + Time</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @{int i = 1;}
                                                @foreach (var item in Model)
                                                {


                                                    <tr>
                                                        <td><i class="flag flag-icon flag-icon-@item.CountryFlag"></i> @item.Country </td>
                                                        <td>@item.City</td>
                                                        <td><a href="">@item.StaffName</a></td>
                                                        <td><a href="#" data-toggle="modal" data-target="#view-popup">@item.Headline</a></td>
                                                        <td>@item.DateAndTime </td>
                                                        <td class="action-icon">
                                                            <a href="@Url.Action("AddStaffNotice","StaffNoticeBoard", new { id=item.Id})" class="m-r-15 text-success" data-toggle="tooltip" data-placement="top" title="" data-original-title="Edit"><i class="icofont icofont-ui-edit"></i></a>
                                                            <a href="#" onclick="DeletePopUp(@item.Id)" class="text-red alert-confirm " data-toggle="tooltip" data-placement="top" title="" data-original-title="Delete"><i class="icofont icofont-delete-alt"></i></a>

                                                        </td>
                                                        @{ i++;}
                                                    </tr>
                                                }

                                            </tbody>

                                        </table>
                                        Page @(Model.PageCount < Model.PageNumber ? 0 :
                                        Model.PageNumber) of @Model.PageCount

                                        @Html.PagedListPager(Model, page => Url.Action("Index",
                                        new { @page = page }))

                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>
</div>



<!-- popup -->
<div class="modal fade" id="view-popup" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <div class="modal-body text-justify">
                <!--    <img src="https://dummyimage.com/800x600/e6e6e6/00000" alt=" " style="float: left; margin-right: 15px; width: 300px;">  -->
                <h5>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</h5>

                <hr>
                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. </p>

                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. </p>

                <p>Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus.</p>

                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. </p>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger btn-round" data-dismiss="modal"><i class="fa fa-remove"></i> Close</button>
                <a href="add-new-notice.php" class="btn btn-primary btn-round"><i class="icofont icofont-ui-edit"></i> Edit</a>
            </div>
        </div>
    </div>
</div>
<!-- popup -->

@section scripts{
    <script type="text/javascript">

        function Fliter() {
            var country = document.getElementById("Country").value;
            var city = document.getElementById("city").value;
            var year = document.getElementById("Year").value;
            var month = document.getElementById("Month").value;
            var staffName = $("#staffName").val();
            var Title = $("#Title").val();
            window.location.href = "/Admin/StaffNoticeBoard/Index?CountryCode=" + country + "&City=" + city + "&Year=" + year + "&Month=" + month
                + "&staffName=" + staffName + "&Title=" + Title;
        }

        function DeletePopUp(id) {
            Riddha.UI.Confirm("Are you sure you want to Delete?", function () {
                Riddha.ajax.get("/Admin/StaffNoticeBoard/DeleteNotice?id=" + id, null)
                    .done(function (result) {
                        if (result.Data == true) {
                            Riddha.UI.SuccessPopUp(result.Message, "Success", 0);
                        }
                        else {
                            Riddha.UI.Alert(result.Message, "Warning", 0);
                        }
                    });
            });
        }
    </script>
}